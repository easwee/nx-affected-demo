"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.resetHandler = void 0;
const tslib_1 = require("tslib");
const app_root_1 = require("@nrwl/tao/src/utils/app-root");
const fs_extra_1 = require("fs-extra");
const client_1 = require("../core/project-graph/daemon/client/client");
const cache_directory_1 = require("../utilities/cache-directory");
const output_1 = require("../utilities/output");
function resetHandler() {
    return (0, tslib_1.__awaiter)(this, void 0, void 0, function* () {
        output_1.output.note({
            title: 'Resetting the Nx workspace cache and stopping the Nx Daemon.',
            bodyLines: [`This might take a few minutes.`],
        });
        const dir = (0, cache_directory_1.cacheDirectory)(app_root_1.appRootPath, (0, cache_directory_1.readCacheDirectoryProperty)(app_root_1.appRootPath));
        yield Promise.all([(0, client_1.stop)(), (0, fs_extra_1.remove)(dir)]);
        output_1.output.success({
            title: 'Successful reset the Nx workspace.',
        });
    });
}
exports.resetHandler = resetHandler;
//# sourceMappingURL=reset.js.map